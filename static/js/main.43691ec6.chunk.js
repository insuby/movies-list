(this["webpackJsonpmovies-list"]=this["webpackJsonpmovies-list"]||[]).push([[0],{33:function(e,t,a){e.exports=a(56)},38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t),a.d(t,"Context",(function(){return H}));var n=a(0),c=a.n(n),r=a(23),o=a.n(r),l=(a(38),a(3)),i=(a(39),a(16)),s=a.n(i),m=a(24),u=a(14),d=a(21),f=(a(41),a(8)),h=a(17),p=a(9),_=a(10),v="LEFT",b=Object(f.a)((function(){var e=Object(n.useContext)(H).catalog,t=function(){var e=Object(n.useContext)(H).loading;return{request:Object(n.useCallback)(function(){var t=Object(m.a)(s.a.mark((function t(a){var n,c,r,o,l,i,m,u,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.url,c=a.method,r=void 0===c?"GET":c,o=a.body,l=void 0===o?null:o,i=a.headers,m=void 0===i?{}:i,n){t.next=3;break}throw new Error("no url found");case 3:return e.setLoading(!0),l&&"string"!==typeof l&&(l=JSON.stringify(l),m=Object(h.a)({"Content-Type":"application/json"},m)),t.prev=5,t.next=8,fetch(n,{method:r,body:l,headers:m});case 8:return u=t.sent,t.next=11,u.json();case 11:if(d=t.sent,u.ok){t.next=14;break}throw new Error(u.statusText);case 14:return e.setLoading(!1),t.abrupt("return",d);case 18:throw t.prev=18,t.t0=t.catch(5),e.setLoading(!1),t.t0;case 22:case"end":return t.stop()}}),t,null,[[5,18]])})));return function(e){return t.apply(this,arguments)}}(),[e]),loading:e}}().request,a=Object(l.useHistory)(),r=Object(n.useState)([]),o=Object(d.a)(r,2),i=o[0],f=o[1],b=Object(n.useState)(1),g=Object(d.a)(b,2),E=g[0],k=g[1],O=function(t){var a=t.currentTarget.textContent;e.setPage(+a),k(+a)},j=function(){e.setPage(e.page+1),k(e.page)},N=function(){e.setPage(e.page-1),k(e.page)},y=function(e,t){for(var a=e,n=[];a<=t;)n.push(a),a+=1;return n},w=Object(n.useCallback)((function(){if(e.total>7){var t=Math.max(2,e.page-1),a=Math.min(e.total-1,e.page+1),n=y(t,a),c=t>2,r=e.total-a>1,o=5-(n.length+1);switch(!0){case c&&!r:var l=y(t-o,t-1);n=[v].concat(Object(u.a)(l),Object(u.a)(n));break;case!c&&r:var i=y(a+1,a+o);n=[].concat(Object(u.a)(n),Object(u.a)(i),["RIGHT"]);break;case c&&r:default:n=[v].concat(Object(u.a)(n),["RIGHT"])}return[1].concat(Object(u.a)(n),[e.total])}return y(1,e.total)}),[e.page,e.total]);return Object(n.useEffect)((function(){f(w)}),[w]),Object(n.useEffect)((function(){Object(m.a)(s.a.mark((function n(){var c,r,o,l,i;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(a),n.next=3,t({url:"".concat("https://yts.mx/api/v2/list_movies.json","?limit=").concat(e.pageLimit,"&page=").concat(e.page)});case 3:c=n.sent,r=c.data,o=r.movies,l=r.limit,i=r.movie_count,e.setList(o),e.setTotal(Math.ceil(i/l));case 10:case"end":return n.stop()}}),n)})))()}),[e,e.page,e.pageLimit,t]),c.a.createElement("div",{className:"pages-nums"},i.map((function(e){switch(e){case"RIGHT":return c.a.createElement("button",{key:"RIGHT",onClick:j},c.a.createElement(p.a,{icon:_.b}));case v:return c.a.createElement("button",{key:v,onClick:N},c.a.createElement(p.a,{icon:_.a}));default:return c.a.createElement("button",{className:E===e?"active":null,key:e,onClick:O,children:e})}})))}));a(49);function g(e){return e?e[0].toUpperCase()+e.slice(1):e}var E=a(15),k=Object(f.a)((function(){var e=Object(n.useContext)(H).catalog;return c.a.createElement("div",{id:"movies"},e.list.map((function(t){var a=t.id,n=t.title,r=t.rating,o=t.medium_cover_image,l=t.url,i=t.genres;return c.a.createElement("div",{key:a,className:"movie shadow-wrapper",id:a},!!i&&c.a.createElement("div",{className:"movie__genres"},i.map((function(e){return c.a.createElement("span",{className:"movie__genre",key:e+a},e)}))),c.a.createElement("a",{className:"movie__link",href:l,target:"_blank",rel:"noopener noreferrer",children:null}),c.a.createElement("img",{className:"movie__img",src:o,alt:n}),c.a.createElement("div",null,c.a.createElement("span",{className:"movie__rating"},r,c.a.createElement(p.a,{icon:_.f})),c.a.createElement("span",{className:"movie__black-list",onClick:function(){return e.setToBlackList(a)}},c.a.createElement(p.a,{icon:_.e,title:"add to black list"}))),c.a.createElement("p",{className:"movie__name strokes-count-1",title:n},g(n)),c.a.createElement("div",{className:"movie__btn__wrapper"},c.a.createElement(E.b,{to:"/products/"+a,className:"btn movie__btn shadow-wrapper"},c.a.createElement(p.a,{icon:_.d}),"show more")))})))})),O=(a(50),Object(f.a)((function(){var e=Object(n.useContext)(H).catalog,t=function(t){var a=t.currentTarget.id;e.returnFromBlackList(+a)};return c.a.createElement("div",{className:"black-list"},c.a.createElement("ul",{className:"shadow-wrapper"},e.blackList.length?e.blackList.map((function(e,a){var n=e.title,r=e.id;return c.a.createElement("li",{key:r,id:r,onClick:t,title:"click to remove from the black list"},c.a.createElement("span",null,a+1),c.a.createElement("span",null,g(n)))})):c.a.createElement("li",null,"Black list is empty")))}))),j=(a(51),function(){var e=Object(n.useContext)(H).catalog;return c.a.createElement("div",{className:"show-count shadow-wrapper shadow-wrapper_reverse"},c.a.createElement("span",null,"Show count \xa0"),c.a.createElement("select",{name:"pageLimit",id:"pageLimit",onChange:function(t){var a=t.currentTarget.value;e.setPageLimit(+a)}},c.a.createElement("option",{value:"5"},"5"),c.a.createElement("option",{value:"10"},"10"),c.a.createElement("option",{value:"50"},"50")))}),N=(a(52),function(e){var t=e.load;return c.a.createElement("div",{className:"loader__wrapper ".concat(t?"visible":"")},c.a.createElement("div",{className:"loader__container"},c.a.createElement("div",{className:"loader"},c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("div",null)))))))))}),y=Object(f.a)((function(){var e=Object(n.useContext)(H).loading.load;return c.a.createElement("div",{className:"catalog"},c.a.createElement(N,{load:e}),c.a.createElement(O,null),c.a.createElement(j,null),c.a.createElement(k,null),c.a.createElement(b,null))})),w=(a(53),a(27)),L=(a(54),Object(f.a)((function(e){var t=e.children,a=Object(n.useContext)(H).modal;return c.a.createElement("div",{className:"modal ".concat(a.show?"show":"")},c.a.createElement("div",{className:"modal__container"},t))}))),C=a(26),S=(a(55),function(e){var t=e.head,a=Object(n.useContext)(H),r=a.modal,o=a.commentsStore,l=Object(w.useParams)().id,i=Object(n.useState)({author:"Noname",comment:""}),s=Object(d.a)(i,2),m=s[0],u=s[1],f=function(e){u(Object(h.a)(Object(h.a)({},m),{},Object(C.a)({},e.target.name,e.target.value)))};return c.a.createElement("div",{className:"form-comment"},c.a.createElement("div",{className:"form-comment__head"},c.a.createElement("p",null,t),c.a.createElement("span",{className:"form-comment__close",onClick:function(){r.setShow(!1)}},c.a.createElement(p.a,{icon:_.g}))),c.a.createElement("div",{className:"form-comment__body"},c.a.createElement("label",{htmlFor:"author"},"Your name:"),c.a.createElement("input",{onChange:f,type:"text",name:"author",id:"author",value:m.author}),c.a.createElement("label",{htmlFor:"form-comment"},"Your comment:"),c.a.createElement("textarea",{autoFocus:!0,name:"comment",id:"comment",cols:"30",onChange:f,rows:"10",required:!0})),c.a.createElement("div",{className:"form-comment__foot"},c.a.createElement("button",{className:"btn form-comment__btn form-comment__btn_submit",children:"submit",onClick:function(){o.setComment(Object(h.a)({id:l},m)),r.setShow(!1)}}),c.a.createElement("button",{className:"btn form-comment__btn form-comment__btn_close",children:"cancel",onClick:function(){r.setShow(!1)}})))}),x=[{path:"/",enable:!0,comp:y,name:"catalog",className:""},{path:"/products/:id",enable:!1,comp:Object(f.a)((function(){var e=Object(n.useContext)(H),t=e.catalog,a=e.commentsStore,r=e.modal,o=Object(w.useParams)().id,l=t.list.find((function(e){return e.id===+o})),i=l.title,s=l.description_full,m=l.date_uploaded,u=l.large_cover_image,d=l.genres;return c.a.createElement("div",{className:"product"},c.a.createElement("div",{className:"product__image"},c.a.createElement("img",{src:u,alt:i})),c.a.createElement("div",{className:"product__info"},c.a.createElement("h1",{className:"product__info__name"},i),c.a.createElement("p",{className:"product__info__genre"},d&&d.map((function(e){return c.a.createElement("span",{key:e},e)}))),c.a.createElement("button",{className:"product__info__btn",onClick:function(){r.setShow(!0)}},c.a.createElement(p.a,{icon:_.c}),"leave comment"),c.a.createElement("p",{className:"product__info__uploaded"},"Uploaded: ",m),c.a.createElement("p",{className:"product__info__desc"},s)),c.a.createElement("div",{className:"product__comments"},c.a.createElement("h3",null,"Comments"),a.comments[o]?c.a.createElement("ul",null,a.comments[o].map((function(e){var t=e.author,n=e.comment,r=e.commentID;return c.a.createElement("li",{key:r},c.a.createElement("span",{className:"product__comments__close",onClick:function(e){a.removeComment(+o,r)}},c.a.createElement(p.a,{icon:_.g})),c.a.createElement("span",{className:"product__comments__text",children:n}),c.a.createElement("span",{className:"product__comments__author",children:t}))}))):c.a.createElement("p",null,"No comment yet")),c.a.createElement(L,null,c.a.createElement(S,{head:i})))})),name:"product",className:""}],I=function(){return c.a.createElement(l.Switch,null,x.map((function(e,t){var a=e.path,n=e.comp;return c.a.createElement(l.Route,{key:t,path:a,component:n,exact:!0})})),c.a.createElement(l.Redirect,{to:"/"}))},T=a(11),J=a(12),P=a(2),B=function(){function e(){Object(T.a)(this,e),this._list=[],this._page=1,this._pageLimit=5,this._total=null,this._blackList=[],Object(P.d)(this)}return Object(J.a)(e,[{key:"setList",value:function(e){var t=this;this.checkBlackList(),Object(P.g)((function(){t._list=t.updateList(e)}))}},{key:"setPage",value:function(e){var t=this;Object(P.g)((function(){t._page=e}))}},{key:"setPageLimit",value:function(e){var t=this;Object(P.g)((function(){t._pageLimit=e}))}},{key:"setTotal",value:function(e){var t=this;Object(P.g)((function(){t._total=e}))}},{key:"setToBlackList",value:function(e){var t=this._list.find((function(t){return t.id===e}));this._blackList.push(t),localStorage.setItem("blackList",JSON.stringify(this._blackList)),this.setList(this._list)}},{key:"returnFromBlackList",value:function(e){var t=JSON.parse(localStorage.getItem("blackList")),a=t.filter((function(t){return t.id===e}))[0];this._blackList=t.filter((function(t){return t.id!==e})),this._list.push(a),localStorage.setItem("blackList",JSON.stringify(this._blackList))}},{key:"checkBlackList",value:function(){var e=this,t=JSON.parse(localStorage.getItem("blackList"))||[];Object(P.g)((function(){e._blackList=t}))}},{key:"updateList",value:function(e){var t=this.blackList.map((function(e){return e.id}));return e.filter((function(e){return!t.includes(e.id)}))}},{key:"list",get:function(){return this._list}},{key:"removed",get:function(){return this._blackList}},{key:"page",get:function(){return this._page}},{key:"pageLimit",get:function(){return this._pageLimit}},{key:"total",get:function(){return this._total}},{key:"blackList",get:function(){return this._blackList}}]),e}(),F=function(){function e(){Object(T.a)(this,e),this._comments=JSON.parse(localStorage.getItem("comments"))||{},Object(P.d)(this)}return Object(J.a)(e,[{key:"setComment",value:function(e){var t=e.id,a=e.comment,n=e.author;a.length&&(this._comments[t]||(this._comments[t]=[]),this._comments[t].push({author:n,comment:a,commentID:Math.ceil(1e4*Math.random())}),localStorage.setItem("comments",JSON.stringify(this._comments)))}},{key:"removeComment",value:function(e,t){this._comments[e]=this._comments[e].filter((function(e){return e.commentID!==t})),localStorage.setItem("comments",JSON.stringify(this._comments))}},{key:"comments",get:function(){return this._comments}}]),e}(),M=function(){function e(){Object(T.a)(this,e),this._load=!1,Object(P.d)(this)}return Object(J.a)(e,[{key:"setLoading",value:function(e){this._load=e}},{key:"load",get:function(){return this._load}}]),e}(),R=function(){function e(){Object(T.a)(this,e),this._show=!1,Object(P.d)(this)}return Object(J.a)(e,[{key:"setShow",value:function(e){this._show=e}},{key:"show",get:function(){return this._show}}]),e}(),G=function(){return c.a.createElement(H.Provider,{value:{catalog:new B,commentsStore:new F,loading:new M,modal:new R}},c.a.createElement(E.a,null,c.a.createElement("header",null,c.a.createElement("nav",null)),c.a.createElement("main",null,c.a.createElement("div",{className:"container"},c.a.createElement(I,null))),c.a.createElement("footer",null)))},H=Object(n.createContext)(null);o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(G,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.43691ec6.chunk.js.map